CREATE DATABASE ReportService
GO

USE ReportService
GO

CREATE TABLE Users(
    Id INT PRIMARY KEY IDENTITY NOT NULL,
    Username NVARCHAR(30) UNIQUE NOT NULL,
    [Password] NVARCHAR(30) NOT NULL,
    [Name] NVARCHAR(50),
    Gender CHAR(1) CHECK(Gender IN ('M', 'F')),
    BirthDate DateTime,
    Age INT,
    Email NVARCHAR(50) NOT NULL
)

CREATE TABLE Departments(
    Id INT PRIMARY KEY IDENTITY NOT NULL,
    [Name] NVARCHAR(50) NOT NULL
)

CREATE TABLE Employees(
     Id INT PRIMARY KEY IDENTITY NOT NULL,
	FirstName NVARCHAR(25),
	LastName NVARCHAR(25),
	Gender CHAR(1) CHECK(Gender IN ('M', 'F')),
     BirthDate DateTime,
	Age INT,
	DepartmentId INT FOREIGN KEY REFERENCES Departments(Id) NOT NULL
)

CREATE TABLE Categories(
    Id INT PRIMARY KEY IDENTITY NOT NULL,
    [Name] NVARCHAR(50) NOT NULL,
    DepartmentId INT FOREIGN KEY REFERENCES Departments(Id)
)

CREATE TABLE [Status](
    Id INT PRIMARY KEY IDENTITY NOT NULL,
    Label NVARCHAR(30) NOT NULL
)

CREATE TABLE Reports(
    Id INT PRIMARY KEY IDENTITY NOT NULL,
    CategoryId INT FOREIGN KEY REFERENCES Categories(Id) NOT NULL,
    StatusId INT FOREIGN KEY REFERENCES Status(Id) NOT NULL,
    OpenDate DATETIME NOT NULL,
    CloseDate DATETIME,
    [Description] NVARCHAR(200),
    UserId INT FOREIGN KEY REFERENCES Users(Id) NOT NULL,
    EmployeeId INT FOREIGN KEY REFERENCES Employees(Id)
)